<!DOCTYPE html>
<html lang="en">
<head>
    <title>Squash League</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"> <!-- flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/timePicker/timePicker.min.css"> <!-- flatpickr time plugin CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script> <!-- flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/timePicker/timePicker.min.js"></script> <!-- flatpickr time plugin JS -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script> <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script> <!-- Firebase Analytics SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script> <!-- Firebase Auth SDK -->
    <script src="firebase.js"></script>
    <script src="auth.js"></script>
    <script src="calendar.js"></script>
    <script src="find_partner.js"></script>
    <script src="availability_form.js"></script>
    <script src="ui.js"></script>
    <script src="ui_timepicker.js"></script>
    <script src="match_request.js"></script>
    <script src="match_requests_box.js"></script>
</head>
<body>
        <div class="container py-4">
            <div class="mb-4 text-center">
                <img src="img/banner.png" alt="Squash League Banner" class="img-fluid" style="max-width:100%;height:auto;">
            </div>
            <!-- Floating Login/Registration Box -->
            <div class="login-floating-box" id="login-section">
                <div id="auth-status" class="mb-2">Not logged in.</div>
            <div id="login-div">
                    <form id="login-form" class="mb-3">
                        <p class="mb-1">Log in to your account:</p>
                        <div class="mb-2"><label>Email: <input type="email" id="login-email" class="form-control" required autocomplete="username"></label></div>
                        <div class="mb-2"><label>Password: <input type="password" id="login-password" class="form-control" required autocomplete="current-password"></label></div>
                        <button type="submit" class="btn btn-primary w-100">Login</button>
                    </form>
                    <div id="login-result" class="mb-2"></div>
                    <button id="show-register-btn" class="btn btn-outline-success w-100 mb-2">Not a user? Register!</button>
                </div>
                <div id="registration-div" style="display:none;">
                    <form id="registration-form" class="mb-3">
                        <p class="mb-1">Register with your email, screen name, and password:</p>
                        <button id="back-to-login-btn" type="button" class="btn btn-link p-0 mb-2">&larr; Back to Login</button>
                        <div class="mb-2"><label>Screen Name: <input type="text" id="reg-screenname" class="form-control" required></label></div>
                        <div class="mb-2"><label>Email: <input type="email" id="reg-email" class="form-control" required autocomplete="username"></label></div>
                        <div class="mb-2"><label>Password: <input type="password" id="reg-password" class="form-control" required autocomplete="current-password"></label></div>
                        <button type="submit" class="btn btn-success w-100">Register</button>
                    </form>
                    <div id="registration-result" class="mb-3"></div>
                </div>
                <button id="logout-btn" class="btn btn-secondary w-100" style="display:none;">Logout</button>
            </div>

            <!-- Availability Section -->
            <div class="card mb-4" id="availability-section">
                <div class="card-header bg-success text-white">Enter Your Availability</div>
                <div class="card-body">
                    <form id="availability-form">
                        <p>Select the dates you are available to play squash:</p>
                        <input id="available-dates" name="available-dates" class="form-control mb-3" placeholder="Select dates..." readonly>
                        <!-- Time slots for each selected date will be dynamically inserted here by ui_timepicker.js -->
                        <button type="submit" class="btn btn-success">Submit Availability</button>
                    </form>
                    <div id="result" class="mt-2"></div>
                </div>
            </div>

            <!-- Find a Partner Section -->
            <div class="card mb-4" id="find-partner-section">
                <div class="card-header bg-info text-white">Find a Partner</div>
                <div class="card-body">
                    <form id="find-partner-form">
                        <p>Select a date to see who else is available:</p>
                        <input id="find-partner-date" name="find-partner-date" class="form-control mb-3" placeholder="Pick a date..." readonly>
                    </form>
                    <div id="partner-results" class="mb-3"></div>
                    <div id="my-partner-summary"></div>
                </div>
            </div>

            <!-- Match Requests Section -->
            <div class="card mb-4" id="match-requests-section">
                <div class="card-header bg-warning text-dark">Your Match Requests</div>
                    <div class="card-body">
                <div id="match-requests-list">Loading...</div>
                </div>
            </div>
        </div>
</body>
</html>